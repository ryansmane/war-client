(this["webpackJsonpwar-client"]=this["webpackJsonpwar-client"]||[]).push([[0],{102:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(46),c=t.n(l);t(58);var s=function(){return r.a.createElement("div",{className:"header-box"},r.a.createElement("img",{className:"logo",src:"/images/logo.png",alt:"a cute shark holding cards"}),r.a.createElement("div",{className:"title-box"},r.a.createElement("h1",null,"Shark Haven")))},i=t(4),m=t(47),o=t(48),u=function(){function e(a){Object(m.a)(this,e),this.id=a,this.deck=[],this.ready=!1}return Object(o.a)(e,[{key:"removeTopThree",value:function(){var e=[];return e.push(this.deck.pop()),e.push(this.deck.pop()),e.push(this.deck.pop()),e}},{key:"getTopCard",value:function(){return this.deck.pop()}},{key:"addWinnings",value:function(e){this.deck=e.concat(this.deck)}}]),e}();exports.Player=u;var d=t(27),p=t(12),g=t(60),E=g.lowercase,y=g.uppercase;var v=function(e){var a=e.socket,t=Object(n.useState)({}),l=Object(i.a)(t,2),c=l[0],s=l[1],m=Object(n.useState)(""),o=Object(i.a)(m,2),u=o[0],g=o[1],v=Object(n.useState)(2),w=Object(i.a)(v,2),f=w[0],h=w[1],b=Object(n.useState)(!1),N=Object(i.a)(b,2),k=N[0],j=N[1],O=Object(n.useState)(),P=Object(i.a)(O,2),S=P[0],_=P[1],C=Object(n.useState)(!1),W=Object(i.a)(C,2),x=W[0],F=W[1],L=Object(n.useState)(""),R=Object(i.a)(L,2),M=R[0],T=R[1];return Object(n.useEffect)((function(){_("".concat(p.sample(y)).concat(p.sample(E))),a.on("return-rooms",(function(e){s(e),console.log(e)})),a.on("all-players-in",(function(a){e.routerProps.history.push("/cardroom/".concat(a))}))}),[]),r.a.createElement("div",null,!k&&S&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"waiting-room"},r.a.createElement("h2",null,"Welcome, Shark ",r.a.createElement("em",null,S),"!"),r.a.createElement("h3",null,"Card Rooms:"),r.a.createElement("ul",null,0===Object.values(c).length&&r.a.createElement("li",null,"No Lobbies At This Time"),c&&Object.values(c).map((function(e){return r.a.createElement("li",null,"Room Name:",e.name," | Members:"," ",Object.keys(e.players).length," /"," ",e.capacity,e.capacity>Object.keys(e.players).length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(t){return function(e,t,n){j(!0),n.preventDefault(),T(e),a.emit("join-room",{host:e,name:t,username:S})}(e.host,e.name,t)}},"Join Room")),e.capacity<=Object.keys(e.players).length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"(Full)")))}))),r.a.createElement("button",{className:"button-create",onClick:function(){return function(){var e=document.querySelector(".create-box"),a=document.querySelector(".button-create");e.style.display="none"===e.style.display?"block":"none",a.style.display="none"}()}},"Create Room"),r.a.createElement("div",{style:{display:"none"},className:"create-box"},r.a.createElement("form",{className:"ifield"},r.a.createElement("div",null,r.a.createElement("label",null,"Room Name"),r.a.createElement("input",{type:"text",onChange:function(e){return g(e.target.value)}})),x&&r.a.createElement("p",{style:{textAlign:"center"}},"Room name cannot be empty."),r.a.createElement("div",{className:"form-cap"},r.a.createElement("label",null,"Players:"),r.a.createElement(d.a.Control,{onChange:function(e){return h(e.target.value)},as:"select"},r.a.createElement("option",null,"2"),r.a.createElement("option",null,"3"),r.a.createElement("option",null,"4"),r.a.createElement("option",null,"5"),r.a.createElement("option",null,"6"))),r.a.createElement("div",{className:"form-cap"},r.a.createElement("label",null,"Game:"),r.a.createElement(d.a.Control,{as:"select"},r.a.createElement("option",null,"War"))),r.a.createElement("button",{type:"button",onClick:function(e){return function(e){if(e.preventDefault(),""===u)F(!0);else{F(!1),j(!0),T(a.id);var t={host:a.id,name:u,assigned:!1,capacity:f,desiredName:S};a.emit("create-room",t)}}(e)}},"Create Room"))))),k&&Object.values(c).length>0&&r.a.createElement("div",null,r.a.createElement("h1",null,"Waiting for more players..."),r.a.createElement("h4",null,"Settings:"),r.a.createElement("p",null,"Room Name: ".concat(u)),c[M]&&r.a.createElement("p",null,"Joined Players: ".concat(Object.values(c[M].players).length,"/").concat(c[M].capacity)),r.a.createElement("p",null,"Game: War")))},w=t(12);var f=function(e){return r.a.createElement("div",{className:"enemy-unit"},e.warState&&!w.isEmpty(e.warringPlayers)&&e.warringPlayers[e.id]&&r.a.createElement("div",{className:"enemy-info-at-war"},e.winner===e.id&&r.a.createElement("img",{className:"crown",src:"/images/crown.png",alt:"winner"}),r.a.createElement("div",{className:"name-and-count"},r.a.createElement("span",null,e.name),e.warState&&!w.isEmpty(e.warringPlayers)&&e.warringPlayers[e.id]&&Object.values(e.warringPlayers).map((function(e){return r.a.createElement("img",{className:"sword",src:"/images/war_sword.png",alt:"sword"})})),r.a.createElement("span",null,"".concat(e.deckLength,"/52")))),!e.warState&&!e.warringPlayers[e.id]&&r.a.createElement("div",null,r.a.createElement("div",{className:"name-and-count"},r.a.createElement("span",null,e.name),e.warState&&!w.isEmpty(e.warringPlayers)&&e.warringPlayers[e.id]&&Object.values(e.warringPlayers).map((function(e){return r.a.createElement("img",{className:"sword",src:"/images/war_sword.png",alt:"sword"})})),r.a.createElement("span",null,"".concat(e.deckLength,"/52")))),!e.deactivationMap[e.id]&&r.a.createElement("img",{className:"card",src:"/images/card_back_war.png",alt:"enemy back"}),e.deactivationMap[e.id]&&r.a.createElement("img",{style:{opacity:".5"},className:"card",src:"/images/lost_card_back_war.png",alt:"enemy back"}))},h=t(64).getPath;t(12);var b=function(e){return r.a.createElement(r.a.Fragment,null,!e.lost&&r.a.createElement(r.a.Fragment,null,e.readyPlayers&&e.readyPlayers[e.id]&&r.a.createElement("img",{className:"card",src:h(e.readyPlayers[e.id].card.pip,e.readyPlayers[e.id].card.suit),alt:"".concat(e.readyPlayers[e.id].card.pip).concat(e.readyPlayers[e.id].card.suit)}),e.readyPlayers&&!e.readyPlayers[e.id]&&e.winner!==e.id&&r.a.createElement("img",{className:"card",src:"/images/empty_card.png",alt:"slot"}),!e.readyPlayers&&r.a.createElement("img",{className:"card",src:"/images/empty_card.png",alt:"slot"}),e.readyPlayers&&!e.readyPlayers[e.id]&&e.winner===e.id&&r.a.createElement("img",{className:"card",src:"/images/winner_card.png",alt:"slot"})),e.lost&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"card",src:"/images/cross_out.png",alt:"loser"})))};var N=function(e){var a=e.host,t=e.socket,l=Object(n.useState)(),c=Object(i.a)(l,2),s=c[0],m=c[1],o=Object(n.useState)(""),u=Object(i.a)(o,2),d=u[0],p=u[1];return Object(n.useEffect)((function(){t.on("messages-update",(function(e){m(e)}))}),[]),r.a.createElement("div",{className:"chat-box"},r.a.createElement("form",null,r.a.createElement("input",{value:d,onChange:function(e){return p(e.target.value)}}),r.a.createElement("button",{onClick:function(n){return function(n){n.preventDefault(),t.emit("send-message",{message:d,host:a,id:e.id}),n.target.value="",p("")}(n)}},"Send")),r.a.createElement("div",null,s&&s.map((function(e){return r.a.createElement("p",null,"Shark ",e.sender,": ",e.message)}))),r.a.createElement("p",null,"Game Started"))};t(12);var k=function(e){return r.a.createElement(r.a.Fragment,null,!e.lost&&r.a.createElement("div",{className:"action-select"},!e.warState&&!e.acted&&r.a.createElement("img",{className:"card animation-card",src:"/images/card_back_war.png",alt:"alt",onClick:function(){return e.shoot()}}),!e.warState&&e.acted&&r.a.createElement("img",{className:"card",src:"/images/card_back_war.png",alt:"alt"}),e.warState&&e.warringPlayers&&e.warringPlayers[e.id]&&!e.acted&&r.a.createElement("img",{className:"card",src:"/images/card_back_war.png",alt:"alt",onClick:function(){return e.resolveWar()}}),e.warState&&e.warringPlayers&&e.warringPlayers[e.id]&&e.acted&&r.a.createElement("img",{className:"card",src:"/images/card_back_war.png",alt:"alt"}),e.warState&&e.warringPlayers&&!e.warringPlayers[e.id]&&r.a.createElement("img",{className:"card",src:"/images/card_back_war.png",alt:"alt"}),r.a.createElement("div",null)),e.lost&&r.a.createElement("img",{className:"card",src:"/images/lost_card_back_war.png",alt:"alt"}))};var j=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"A player from your game has disconnected."),r.a.createElement("h4",null,"Redirecting in five seconds..."))};var O=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Click your deck to ready up!"),r.a.createElement("img",{src:"/images/card_back_war.png",alt:"click here to ready up",onClick:function(){return e.initMyself()}}))};var P=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"WINNER"))},S=t(65),_=S.Howl,C=(S.Howler,t(12));var W=function(e){var a=e.socket,t=new _({src:["/sounds/card_deal.wav"],volume:1}),l=new _({src:["/sounds/war_sound.wav"],volume:1}),c=Object(n.useState)(),s=Object(i.a)(c,2),m=s[0],o=s[1],u=Object(n.useState)(),d=Object(i.a)(u,2),p=d[0],g=d[1],E=Object(n.useState)(!1),y=Object(i.a)(E,2),v=y[0],w=y[1],h=Object(n.useState)(),S=Object(i.a)(h,2),W=S[0],x=S[1],F=Object(n.useState)(!1),L=Object(i.a)(F,2),R=L[0],M=L[1],T=Object(n.useState)({}),H=Object(i.a)(T,2),A=H[0],J=H[1],D=Object(n.useState)(),I=Object(i.a)(D,2),q=I[0],G=I[1],B=Object(n.useState)(!1),U=Object(i.a)(B,2),z=U[0],K=U[1],Q=Object(n.useState)({}),Y=Object(i.a)(Q,2),$=Y[0],V=Y[1],X=Object(n.useState)(!1),Z=Object(i.a)(X,2),ee=Z[0],ae=Z[1],te=Object(n.useState)(!1),ne=Object(i.a)(te,2),re=(ne[0],ne[1]),le=Object(n.useState)(!1),ce=Object(i.a)(le,2),se=ce[0],ie=ce[1];function me(){t.play(),re(!0),a.emit("ready-up",m)}function oe(){t.play(),a.emit("need-resolution",{host:m,warringPlayers:A})}return Object(n.useEffect)((function(){o(e.routerProps.location.pathname.substring(10)),a.on("return-all-players",(function(e){g(e.players),G(e.deckLengths)})),a.on("one-ready",(function(t){x(t.players),G(t.deckLengths),Object.values(t.players).length!==t.roomCap||t.war||setTimeout((function(){a.emit("refresh-cards",e.routerProps.location.pathname.substring(10))}),1500)})),a.on("resolved",(function(e){e.deactivationMap&&V(e.deactivationMap),e.ultimateWinner&&ae(e.winner),e.warHistory?(M(!1),x(e.warHistory),J({}),setTimeout((function(){K(e.winner),G(e.deckLengths),x(e.players)}),1500)):(M(!1),x(e.players),K(e.winner),G(e.deckLengths))})),a.on("war",(function(e){setTimeout((function(){e.deactivationMap&&V(e.deactivationMap),K(!1),G(e.deckLengths),x(e.players),J(e.warPlayers),M(!0)}),100),l.play()})),a.on("disconnected",(function(a){ie(!0),setTimeout((function(){return e.routerProps.history.push("/")}),5e3)}))}),[]),r.a.createElement(r.a.Fragment,null,!se&&r.a.createElement("div",{className:"felt-container"},m&&!p&&!v&&r.a.createElement(O,{host:m,initMyself:function(){w(!0),a.emit("init-one-player",m)}}),m&&!p&&v&&r.a.createElement("h1",null,"Waiting for other players to ready up..."),m&&p&&v&&!ee&&r.a.createElement("div",{className:"felt"},r.a.createElement("div",{className:"enemy-side"},Object.values(p).map((function(e){if(e.id!==a.id)return r.a.createElement("div",{className:"enemy-unit-container"},r.a.createElement("div",{className:"enemy-slot"},r.a.createElement(f,{warringPlayers:A,warState:R,name:e.name,deckLength:q?q[e.id]:null,id:e.id,deactivationMap:$,winner:z}),r.a.createElement("div",{className:"enemystaging"},r.a.createElement(b,{lost:!(!$||!$[e.id]),winner:z,warState:R,warringPlayers:A,id:e.id,readyPlayers:W||!1}))))}))),r.a.createElement("div",{className:"felt-partition"},R&&r.a.createElement("p",{className:"war-statement"},"WAR!")),!$[a.id]&&r.a.createElement("div",{className:"side-container"},r.a.createElement(N,{socket:a,host:e.routerProps.location.pathname.substring(10),id:a.id}),r.a.createElement("div",{className:"my-side"},r.a.createElement("div",{className:"my-staging"},r.a.createElement("div",null,r.a.createElement("div",{className:"f"},R&&!C.isEmpty(A)&&A[a.id]&&Object.values(A).map((function(e){return r.a.createElement("img",{className:"sword",src:"/images/war_sword.png",alt:"sword"})})),r.a.createElement("span",null,r.a.createElement("em",null,"S. ",p[a.id].name))),r.a.createElement(k,{lost:!1,name:p?p[a.id].name:"No Name Selected",deckLength:q?q[a.id]:null,warState:R,shoot:me,resolveWar:oe,winner:z,warringPlayers:A,id:a.id,acted:W&&W[a.id]?W[a.id].changed:null})),r.a.createElement("div",{className:"action-partition"}),r.a.createElement("div",null,r.a.createElement("div",{style:{visibility:"hidden"},className:"f"},R&&!C.isEmpty(A)&&A[a.id]&&Object.values(A).map((function(e){return r.a.createElement("img",{className:"sword",src:"/images/war_sword.png",alt:"sword"})})),r.a.createElement("span",null,p[a.id].name)),r.a.createElement(b,{lost:!1,winner:z,warState:R,warringPlayers:A,id:a.id,readyPlayers:W||!1}))),r.a.createElement("p",null,q&&"Card Count: ".concat(q[a.id],"/52")))),$[a.id]&&r.a.createElement("div",{className:"side-container"},r.a.createElement(N,{socket:a,host:e.routerProps.location.pathname.substring(10),id:a.id}),r.a.createElement("div",{className:"my-side"},r.a.createElement("div",{className:"my-staging"},r.a.createElement("div",null,r.a.createElement("div",{className:"f"},r.a.createElement("span",null,r.a.createElement("em",null,"S. ",p[a.id].name))),r.a.createElement(k,{lost:!0,name:p?p[a.id].name:"No Name Selected",deckLength:q?q[a.id]:null,warState:R,shoot:me,resolveWar:oe,winner:z,warringPlayers:A,id:a.id,acted:W&&W[a.id]?W[a.id].changed:null}),"}"),r.a.createElement("div",{className:"action-partition"}),r.a.createElement("div",null,r.a.createElement(b,{lost:!0,winner:z,warState:R,warringPlayers:A,id:a.id,readyPlayers:W||!1}))),r.a.createElement("p",null,q&&"Card Count: 0/52"))),ee===a.id&&r.a.createElement("div",{className:"winning-screen"},r.a.createElement("h1",null,"YOU WIN"))),v&&r.a.createElement("p",{className:"instructions"},"Have fun!")),se&&r.a.createElement(j,null),ee&&r.a.createElement(P,null))},x=t(10),F=(t(66),t(67),t(50)),L=t.n(F)()("https://sharkhaven.herokuapp.com/");var R=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement(s,null)),r.a.createElement("main",null,r.a.createElement(x.c,null,r.a.createElement(x.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(v,{socket:L,routerProps:e})}}),r.a.createElement(x.a,{path:"/cardroom/:roomID",render:function(e){return r.a.createElement(W,{socket:L,routerProps:e})}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=t(16);c.a.render(r.a.createElement(M.a,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},53:function(e,a,t){e.exports=t(102)},58:function(e,a,t){},60:function(e,a){var t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n=t.map((function(e){return e.toUpperCase()}));a.lowercase=t,a.uppercase=n},64:function(e,a){a.getPath=function(e,a){return e<11?"/images/card_sprites/"+e.toString()+a+".png":"/images/card_sprites/"+{11:"J",12:"Q",13:"K",14:"A"}[e]+a+".png"}},66:function(e,a,t){},97:function(e,a){}},[[53,1,2]]]);
//# sourceMappingURL=main.fe33ee3f.chunk.js.map