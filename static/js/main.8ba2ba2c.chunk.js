(this["webpackJsonpwar-client"]=this["webpackJsonpwar-client"]||[]).push([[0],{100:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(46),c=t.n(l);t(56);var s=function(){return r.a.createElement("div",{className:"header-box"},r.a.createElement("img",{className:"logo",src:"./images/logo.png",alt:"a cute shark holding cards"}),r.a.createElement("div",{className:"title-box"},r.a.createElement("h1",null,"Shark Haven")))},i=t(4),m=t(27),o=t(12),u=t(58),d=u.lowercase,p=u.uppercase;var E=function(e){var a=e.socket,t=Object(n.useState)({}),l=Object(i.a)(t,2),c=l[0],s=l[1],u=Object(n.useState)(""),E=Object(i.a)(u,2),g=E[0],y=E[1],v=Object(n.useState)(2),w=Object(i.a)(v,2),b=w[0],f=w[1],h=Object(n.useState)(!1),N=Object(i.a)(h,2),j=N[0],O=N[1],k=Object(n.useState)(),S=Object(i.a)(k,2),P=S[0],C=S[1],_=Object(n.useState)(!1),W=Object(i.a)(_,2),x=W[0],L=W[1],F=Object(n.useState)(""),M=Object(i.a)(F,2),R=M[0],H=M[1];return Object(n.useEffect)((function(){C("".concat(o.sample(p)).concat(o.sample(d))),a.on("return-rooms",(function(e){s(e),console.log(e)})),a.on("all-players-in",(function(a){e.routerProps.history.push("/cardroom/".concat(a))}))}),[]),r.a.createElement("div",null,!j&&P&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"waiting-room"},r.a.createElement("h2",null,"Welcome, Shark ",r.a.createElement("em",null,P),"!"),r.a.createElement("h3",null,"Card Rooms:"),r.a.createElement("ul",{className:"list"},0===Object.values(c).length&&r.a.createElement("li",{className:"marker"},"No Lobbies At This Time"),c&&Object.values(c).map((function(e){return r.a.createElement("li",{className:"marker"},r.a.createElement("span",{className:"list-span"},"Name: ",e.name," "),r.a.createElement("span",{className:"list-span"},"Members: ",Object.keys(e.players).length," ","/ ",e.capacity," ",e.capacity<=Object.keys(e.players).length&&"(Full)"),e.capacity>Object.keys(e.players).length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"join-button",onClick:function(t){return function(e,t,n){O(!0),n.preventDefault(),H(e),a.emit("join-room",{host:e,name:t,username:P})}(e.host,e.name,t)}},"Join Room")))}))),r.a.createElement("button",{className:"button-create",onClick:function(){return function(){var e=document.querySelector(".create-box"),a=document.querySelector(".button-create");e.style.display="none"===e.style.display?"block":"none",a.style.display="none"}()}},"Create Room"),r.a.createElement("div",{style:{display:"none"},className:"create-box"},r.a.createElement("form",{className:"ifield"},r.a.createElement("div",null,r.a.createElement("label",null,"Name:"," "),r.a.createElement("input",{type:"text",onChange:function(e){return y(e.target.value)}})),x&&r.a.createElement("p",{style:{textAlign:"center"}},"Room name cannot be empty."),r.a.createElement("div",{className:"form-cap"},r.a.createElement("label",null,"Players:"," "),r.a.createElement(m.a.Control,{onChange:function(e){return f(e.target.value)},as:"select"},r.a.createElement("option",null,"2"),r.a.createElement("option",null,"3"),r.a.createElement("option",null,"4"),r.a.createElement("option",null,"5"),r.a.createElement("option",null,"6"))),r.a.createElement("div",{className:"form-cap"},r.a.createElement("label",null,"Game:"," "),r.a.createElement(m.a.Control,{as:"select"},r.a.createElement("option",null,"War"))),r.a.createElement("button",{type:"button",onClick:function(e){return function(e){if(e.preventDefault(),""===g)L(!0);else{L(!1),O(!0),H(a.id);var t={host:a.id,name:g,assigned:!1,capacity:b,desiredName:P};a.emit("create-room",t)}}(e)}},"Create Room"))))),j&&Object.values(c).length>0&&r.a.createElement("div",{className:"waiting-room"},r.a.createElement("h1",null,"Waiting for more players..."),r.a.createElement("div",{className:"top-border"}),r.a.createElement("div",{style:{padding:"12px 0px"}},r.a.createElement("h4",null,"Room Settings:"),r.a.createElement("p",null,"Room Name: ".concat(g)),c[R]&&r.a.createElement("p",null,"Joined Players: ".concat(Object.values(c[R].players).length,"/").concat(c[R].capacity)),r.a.createElement("p",null,"Game: War")),r.a.createElement("div",{className:"top-border"})))},g=t(12);var y=function(e){return r.a.createElement("div",{className:"enemy-unit"},e.warState&&!g.isEmpty(e.warringPlayers)&&e.warringPlayers[e.id]&&r.a.createElement("div",{className:"enemy-info-at-war"},e.winner===e.id&&r.a.createElement("img",{className:"crown",src:"../images/crown.png",alt:"winner"}),r.a.createElement("div",{className:"name-and-count"},r.a.createElement("span",null,e.name),e.warState&&!g.isEmpty(e.warringPlayers)&&e.warringPlayers[e.id]&&Object.values(e.warringPlayers).map((function(e){return r.a.createElement("img",{className:"sword",src:"../images/war_sword.png",alt:"sword"})})),r.a.createElement("span",null,"".concat(e.deckLength,"/52")))),!e.warState&&!e.warringPlayers[e.id]&&r.a.createElement("div",null,r.a.createElement("div",{className:"name-and-count"},r.a.createElement("span",null,e.name),e.warState&&!g.isEmpty(e.warringPlayers)&&e.warringPlayers[e.id]&&Object.values(e.warringPlayers).map((function(e){return r.a.createElement("img",{className:"sword",src:"../images/war_sword.png",alt:"sword"})})),r.a.createElement("span",null,"".concat(e.deckLength,"/52")))),!e.deactivationMap[e.id]&&r.a.createElement("img",{className:"card",src:"../images/cardbackwar.png",alt:"enemy back"}),e.deactivationMap[e.id]&&r.a.createElement("img",{style:{opacity:".5"},className:"card",src:"../images/lost_card_back_war.png",alt:"enemy back"}))},v=t(62).getPath;t(12);var w=function(e){return r.a.createElement(r.a.Fragment,null,!e.lost&&r.a.createElement(r.a.Fragment,null,e.readyPlayers&&e.readyPlayers[e.id]&&r.a.createElement("img",{className:"card",src:v(e.readyPlayers[e.id].card.pip,e.readyPlayers[e.id].card.suit),alt:"".concat(e.readyPlayers[e.id].card.pip).concat(e.readyPlayers[e.id].card.suit)}),e.readyPlayers&&!e.readyPlayers[e.id]&&e.winner!==e.id&&r.a.createElement("img",{className:"card",src:"../images/empty_card.png",alt:"slot"}),!e.readyPlayers&&r.a.createElement("img",{className:"card",src:"../images/empty_card.png",alt:"slot"}),e.readyPlayers&&!e.readyPlayers[e.id]&&e.winner===e.id&&r.a.createElement("img",{className:"card",src:"../images/winner_card.png",alt:"slot"})),e.lost&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"card",src:"../images/cross_out.png",alt:"loser"})))};var b=function(e){var a=e.host,t=e.socket,l=Object(n.useState)(),c=Object(i.a)(l,2),s=c[0],m=c[1],o=Object(n.useState)(""),u=Object(i.a)(o,2),d=u[0],p=u[1];return Object(n.useEffect)((function(){t.on("messages-update",(function(e){m(e)}))}),[]),r.a.createElement("div",{className:"chat-box"},r.a.createElement("form",null,r.a.createElement("input",{value:d,onChange:function(e){return p(e.target.value)}}),r.a.createElement("button",{onClick:function(n){return function(n){n.preventDefault(),t.emit("send-message",{message:d,host:a,id:e.id}),n.target.value="",p("")}(n)}},"Send")),r.a.createElement("div",null,s&&s.map((function(e){return r.a.createElement("p",null,"Shark ",e.sender,": ",e.message)}))),r.a.createElement("p",null,"Game Started"))};t(12);var f=function(e){return r.a.createElement(r.a.Fragment,null,!e.lost&&r.a.createElement("div",{className:"action-select"},!e.warState&&!e.acted&&r.a.createElement("img",{className:"card animation-card",src:"../images/cardbackwar.png",alt:"alt",onClick:function(){return e.shoot()}}),!e.warState&&e.acted&&r.a.createElement("img",{className:"card",src:"../images/cardbackwar.png",alt:"alt"}),e.warState&&e.warringPlayers&&e.warringPlayers[e.id]&&!e.acted&&r.a.createElement("img",{className:"card",src:"../images/cardbackwar.png",alt:"alt",onClick:function(){return e.resolveWar()}}),e.warState&&e.warringPlayers&&e.warringPlayers[e.id]&&e.acted&&r.a.createElement("img",{className:"card",src:"../images/cardbackwar.png",alt:"alt"}),e.warState&&e.warringPlayers&&!e.warringPlayers[e.id]&&r.a.createElement("img",{className:"card",src:"../images/cardbackwar.png",alt:"alt"}),r.a.createElement("div",null)),e.lost&&r.a.createElement("img",{className:"card",src:"../images/lost_card_back_war.png",alt:"alt"}))};var h=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"A player from your game has disconnected."),r.a.createElement("h4",null,"Redirecting in five seconds..."))};var N=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Click your deck to ready up!"),r.a.createElement("img",{src:"../images/cardbackwar.png",alt:"click here to ready up",onClick:function(){return e.initMyself()}}))};var j=function(e){return r.a.createElement("div",{className:"felt-container"},r.a.createElement("div",{className:"felt"},r.a.createElement("h2",null,"Winner!"),r.a.createElement("img",{src:"../images/logo.png",alt:"celebration shark"}),r.a.createElement("h4",null,"Shark ",r.a.createElement("em",null,e.name),"!")))},O=t(63),k=O.Howl,S=(O.Howler,t(12));var P=function(e){var a=e.socket,t=new k({src:["../sounds/card_deal.wav"],volume:1}),l=new k({src:["../sounds/war_sound.wav"],volume:1}),c=Object(n.useState)(),s=Object(i.a)(c,2),m=s[0],o=s[1],u=Object(n.useState)(),d=Object(i.a)(u,2),p=d[0],E=d[1],g=Object(n.useState)(!1),v=Object(i.a)(g,2),O=v[0],P=v[1],C=Object(n.useState)(),_=Object(i.a)(C,2),W=_[0],x=_[1],L=Object(n.useState)(!1),F=Object(i.a)(L,2),M=F[0],R=F[1],H=Object(n.useState)({}),T=Object(i.a)(H,2),A=T[0],J=T[1],D=Object(n.useState)(),q=Object(i.a)(D,2),G=q[0],B=q[1],I=Object(n.useState)(!1),z=Object(i.a)(I,2),K=z[0],Q=z[1],U=Object(n.useState)({}),$=Object(i.a)(U,2),V=$[0],X=$[1],Y=Object(n.useState)(!1),Z=Object(i.a)(Y,2),ee=Z[0],ae=Z[1],te=Object(n.useState)(!1),ne=Object(i.a)(te,2),re=(ne[0],ne[1]),le=Object(n.useState)(!1),ce=Object(i.a)(le,2),se=ce[0],ie=ce[1];function me(){t.play(),re(!0),a.emit("ready-up",m)}function oe(){t.play(),a.emit("need-resolution",{host:m,warringPlayers:A})}return Object(n.useEffect)((function(){o(e.routerProps.location.pathname.substring(10)),a.on("return-all-players",(function(e){E(e.players),B(e.deckLengths)})),a.on("one-ready",(function(t){x(t.players),B(t.deckLengths),Object.values(t.players).length!==t.roomCap||t.war||setTimeout((function(){a.emit("refresh-cards",e.routerProps.location.pathname.substring(10))}),1500)})),a.on("resolved",(function(e){e.deactivationMap&&X(e.deactivationMap),e.ultimateWinner&&ae(e.winner),e.warHistory?(R(!1),x(e.warHistory),J({}),setTimeout((function(){Q(e.winner),B(e.deckLengths),x(e.players)}),1500)):(R(!1),x(e.players),Q(e.winner),B(e.deckLengths))})),a.on("war",(function(e){setTimeout((function(){e.deactivationMap&&X(e.deactivationMap),Q(!1),B(e.deckLengths),x(e.players),J(e.warPlayers),R(!0)}),100),l.play()})),a.on("disconnected",(function(a){ie(!0),setTimeout((function(){return e.routerProps.history.push("/")}),5e3)}))}),[]),r.a.createElement(r.a.Fragment,null,!se&&r.a.createElement("div",{className:"felt-container"},m&&!p&&!O&&r.a.createElement(N,{host:m,initMyself:function(){P(!0),a.emit("init-one-player",m)}}),m&&!p&&O&&r.a.createElement("h1",null,"Waiting for other players to ready up..."),m&&p&&O&&!ee&&r.a.createElement("div",{className:"felt"},r.a.createElement("div",{className:"enemy-side"},Object.values(p).map((function(e){if(e.id!==a.id)return r.a.createElement("div",{className:"enemy-unit-container"},r.a.createElement("div",{className:"enemy-slot"},r.a.createElement(y,{warringPlayers:A,warState:M,name:e.name,deckLength:G?G[e.id]:null,id:e.id,deactivationMap:V,winner:K}),r.a.createElement("div",{className:"enemystaging"},r.a.createElement(w,{lost:!(!V||!V[e.id]),winner:K,warState:M,warringPlayers:A,id:e.id,readyPlayers:W||!1}))))}))),r.a.createElement("div",{className:"felt-partition"},M&&r.a.createElement("p",{className:"war-statement"},"WAR!")),!V[a.id]&&r.a.createElement("div",{className:"side-container"},r.a.createElement(b,{socket:a,host:e.routerProps.location.pathname.substring(10),id:a.id}),r.a.createElement("div",{className:"my-side"},r.a.createElement("div",{className:"my-staging"},r.a.createElement("div",null,r.a.createElement("div",{className:"f"},M&&!S.isEmpty(A)&&A[a.id]&&Object.values(A).map((function(e){return r.a.createElement("img",{className:"sword",src:"../images/war_sword.png",alt:"sword"})})),r.a.createElement("span",null,r.a.createElement("em",null,"S. ",p[a.id].name))),r.a.createElement(f,{lost:!1,name:p?p[a.id].name:"No Name Selected",deckLength:G?G[a.id]:null,warState:M,shoot:me,resolveWar:oe,winner:K,warringPlayers:A,id:a.id,acted:W&&W[a.id]?W[a.id].changed:null})),r.a.createElement("div",{className:"action-partition"}),r.a.createElement("div",null,r.a.createElement("div",{style:{visibility:"hidden"},className:"f"},M&&!S.isEmpty(A)&&A[a.id]&&Object.values(A).map((function(e){return r.a.createElement("img",{className:"sword",src:"../images/war_sword.png",alt:"sword"})})),r.a.createElement("span",null,p[a.id].name)),r.a.createElement(w,{lost:!1,winner:K,warState:M,warringPlayers:A,id:a.id,readyPlayers:W||!1}))),r.a.createElement("p",null,G&&"Card Count: ".concat(G[a.id],"/52")))),V[a.id]&&r.a.createElement("div",{className:"side-container"},r.a.createElement(b,{socket:a,host:e.routerProps.location.pathname.substring(10),id:a.id}),r.a.createElement("div",{className:"my-side"},r.a.createElement("div",{className:"my-staging"},r.a.createElement("div",null,r.a.createElement("div",{className:"f"},r.a.createElement("span",null,r.a.createElement("em",null,"S. ",p[a.id].name))),r.a.createElement(f,{lost:!0,name:p?p[a.id].name:"No Name Selected",deckLength:G?G[a.id]:null,warState:M,shoot:me,resolveWar:oe,winner:K,warringPlayers:A,id:a.id,acted:W&&W[a.id]?W[a.id].changed:null})),r.a.createElement("div",{className:"action-partition"}),r.a.createElement("div",null,r.a.createElement(w,{lost:!0,winner:K,warState:M,warringPlayers:A,id:a.id,readyPlayers:W||!1}))),r.a.createElement("p",null,G&&"Card Count: 0/52")))),O&&r.a.createElement("p",{className:"instructions"},"Have fun!"),ee&&r.a.createElement(j,{name:p&&p[ee]?p[ee].name:"No Winner"})),se&&r.a.createElement(h,null))},C=t(10),_=(t(64),t(65),t(48)),W=t.n(_)()("https://sharkhaven.herokuapp.com/");var x=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement(s,null)),r.a.createElement("main",null,r.a.createElement(C.c,null,r.a.createElement(C.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(E,{socket:W,routerProps:e})}}),r.a.createElement(C.a,{path:"/cardroom/:roomID",render:function(e){return r.a.createElement(P,{socket:W,routerProps:e})}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=t(24);c.a.render(r.a.createElement(L.a,{basename:"/war-client"},r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,a,t){e.exports=t(100)},56:function(e,a,t){},58:function(e,a){var t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n=t.map((function(e){return e.toUpperCase()}));a.lowercase=t,a.uppercase=n},62:function(e,a){a.getPath=function(e,a){return e<11?"../images/card_sprites/"+e.toString()+a+".png":"../images/card_sprites/"+{11:"J",12:"Q",13:"K",14:"A"}[e]+a+".png"}},64:function(e,a,t){},95:function(e,a){}},[[51,1,2]]]);
//# sourceMappingURL=main.8ba2ba2c.chunk.js.map